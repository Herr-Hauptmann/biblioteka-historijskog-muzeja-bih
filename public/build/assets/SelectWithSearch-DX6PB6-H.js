import{h as x,u as z,s as Fe,x as N,y as pe,z as Pe,l as A,A as Oe,B as Q,D as Y,q as ve,E as j,G as te,H as ye,I as we,F as Ie,J as L,r as ke,K as Ve,c as J,o as B,b as W,e as ae,w as U,a as q,L as ie,g as se,d as $e,t as re,k as Be,n as ue}from"./app-B3F6_HyN.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as ce,t as he,S as Ne}from"./transition-Cm3_huEr.js";import{i as Re,a as oe,o as w,A as ee,N as le,b as P,u as Z,l as je,c as ne,T as fe,n as We,w as Ke,t as Ue,f as qe,E as He,d as Ze,O as Je}from"./keyboard-DhR-kLoq.js";import{s as Ye}from"./use-resolve-button-type-C1ILa-W3.js";function H(l,s,t){let o=t.initialDeps??[],e;return()=>{var a,i,n,h;let v;t.key&&((a=t.debug)!=null&&a.call(t))&&(v=Date.now());const d=l();if(!(d.length!==o.length||d.some((I,O)=>o[O]!==I)))return e;o=d;let m;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(m=Date.now()),e=s(...d),t.key&&((n=t.debug)!=null&&n.call(t))){const I=Math.round((Date.now()-v)*100)/100,O=Math.round((Date.now()-m)*100)/100,F=O/16,k=(D,g)=>{for(D=String(D);D.length<g;)D=" "+D;return D};console.info(`%câ± ${k(O,5)} /${k(I,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*F,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(h=t==null?void 0:t.onChange)==null||h.call(t,e),e}}function de(l,s){if(l===void 0)throw new Error("Unexpected undefined");return l}const Ge=(l,s)=>Math.abs(l-s)<1,Xe=(l,s,t)=>{let o;return function(...e){l.clearTimeout(o),o=l.setTimeout(()=>s.apply(this,e),t)}},Qe=l=>l,et=l=>{const s=Math.max(l.startIndex-l.overscan,0),t=Math.min(l.endIndex+l.overscan,l.count-1),o=[];for(let e=s;e<=t;e++)o.push(e);return o},tt=(l,s)=>{const t=l.scrollElement;if(!t)return;const o=l.targetWindow;if(!o)return;const e=i=>{const{width:n,height:h}=i;s({width:Math.round(n),height:Math.round(h)})};if(e(t.getBoundingClientRect()),!o.ResizeObserver)return()=>{};const a=new o.ResizeObserver(i=>{const n=()=>{const h=i[0];if(h!=null&&h.borderBoxSize){const v=h.borderBoxSize[0];if(v){e({width:v.inlineSize,height:v.blockSize});return}}e(t.getBoundingClientRect())};l.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(n):n()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},me={passive:!0},be=typeof window>"u"?!0:"onscrollend"in window,lt=(l,s)=>{const t=l.scrollElement;if(!t)return;const o=l.targetWindow;if(!o)return;let e=0;const a=l.options.useScrollendEvent&&be?()=>{}:Xe(o,()=>{s(e,!1)},l.options.isScrollingResetDelay),i=d=>()=>{const{horizontal:f,isRtl:m}=l.options;e=f?t.scrollLeft*(m&&-1||1):t.scrollTop,a(),s(e,d)},n=i(!0),h=i(!1);h(),t.addEventListener("scroll",n,me);const v=l.options.useScrollendEvent&&be;return v&&t.addEventListener("scrollend",h,me),()=>{t.removeEventListener("scroll",n),v&&t.removeEventListener("scrollend",h)}},nt=(l,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(l.getBoundingClientRect()[t.options.horizontal?"width":"height"])},ot=(l,{adjustments:s=0,behavior:t},o)=>{var e,a;const i=l+s;(a=(e=o.scrollElement)==null?void 0:e.scrollTo)==null||a.call(e,{[o.options.horizontal?"left":"top"]:i,behavior:t})};class at{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(e=>{e.forEach(a=>{const i=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var e;(e=o())==null||e.disconnect(),t=null},observe:e=>{var a;return(a=o())==null?void 0:a.observe(e,{box:"border-box"})},unobserve:e=>{var a;return(a=o())==null?void 0:a.unobserve(e)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,e])=>{typeof e>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Qe,rangeExtractor:et,onChange:()=>{},measureElement:nt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var o,e;(e=(o=this.options).onChange)==null||e.call(o,this,t)},this.maybeNotify=H(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const e=new Map,a=new Map;for(let i=o-1;i>=0;i--){const n=t[i];if(e.has(n.lane))continue;const h=a.get(n.lane);if(h==null||n.end>h.end?a.set(n.lane,n):n.end<h.end&&e.set(n.lane,!0),e.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,n)=>i.end===n.end?i.index-n.index:i.end-n.end)[0]:void 0},this.getMeasurementOptions=H(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,e,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:e,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=H(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:e,getItemKey:a,enabled:i},n)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const h=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const v=this.measurementsCache.slice(0,h);for(let d=h;d<t;d++){const f=a(d),m=this.options.lanes===1?v[d-1]:this.getFurthestMeasurement(v,d),I=m?m.end+this.options.gap:o+e,O=n.get(f),F=typeof O=="number"?O:this.options.estimateSize(d),k=I+F,D=m?m.lane:d%this.options.lanes;v[d]={index:d,start:I,size:F,end:k,key:f,lane:D}}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=H(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,o,e)=>this.range=t.length>0&&o>0?it({measurements:t,outerSize:o,scrollOffset:e}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=H(()=>{let t=null,o=null;const e=this.calculateRange();return e&&(t=e.startIndex,o=e.endIndex),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,o]},(t,o,e,a,i)=>a===null||i===null?[]:t({startIndex:a,endIndex:i,overscan:o,count:e}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,e=t.getAttribute(o);return e?parseInt(e,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const e=this.indexFromElement(t),a=this.measurementsCache[e];if(!a)return;const i=a.key,n=this.elementsCache.get(i);n!==t&&(n&&this.observer.unobserve(n),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(e,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const e=this.measurementsCache[t];if(!e)return;const a=this.itemSizeCache.get(e.key)??e.size,i=o-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(e,i,this):e.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(e.index),this.itemSizeCache=new Map(this.itemSizeCache.set(e.key,o)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((o,e)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(e))});return}this._measureElement(t,void 0)},this.getVirtualItems=H(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,o)=>{const e=[];for(let a=0,i=t.length;a<i;a++){const n=t[a],h=o[n];e.push(h)}return e},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return de(o[Ce(0,o.length-1,e=>de(o[e]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const e=this.getSize(),a=this.getScrollOffset();o==="auto"&&t>=a+e&&(o="end"),o==="end"&&(t-=e);const i=this.options.horizontal?"scrollWidth":"scrollHeight",h=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-e;return Math.max(Math.min(h,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const e=this.measurementsCache[t];if(!e)return;const a=this.getSize(),i=this.getScrollOffset();if(o==="auto")if(e.end>=i+a-this.options.scrollPaddingEnd)o="end";else if(e.start<=i+this.options.scrollPaddingStart)o="start";else return[i,o];const n=e.start-this.options.scrollPaddingStart+(e.size-a)/2;switch(o){case"center":return[this.getOffsetForAlignment(n,o),o];case"end":return[this.getOffsetForAlignment(e.end+this.options.scrollPaddingEnd,o),o];default:return[this.getOffsetForAlignment(e.start-this.options.scrollPaddingStart,o),o]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:e}={})=>{this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:e})},this.scrollToIndex=(t,{align:o="auto",behavior:e}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,o);if(!a)return;const[i,n]=a;this._scrollToOffset(i,{adjustments:void 0,behavior:e}),e!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[v]=de(this.getOffsetForIndex(t,n));Ge(v,this.getScrollOffset())||this.scrollToIndex(t,{align:n,behavior:e})}else this.scrollToIndex(t,{align:n,behavior:e})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let e;return o.length===0?e=this.options.paddingStart:e=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(a=>a.end)),Math.max(e-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:o,behavior:e})=>{this.options.scrollToFn(t,{behavior:e,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const Ce=(l,s,t,o)=>{for(;l<=s;){const e=(l+s)/2|0,a=t(e);if(a<o)l=e+1;else if(a>o)s=e-1;else return e}return l>0?l-1:0};function it({measurements:l,outerSize:s,scrollOffset:t}){const o=l.length-1,a=Ce(0,o,n=>l[n].start,t);let i=a;for(;i<o&&l[i].end<t+s;)i++;return{startIndex:a,endIndex:i}}function st(l){const s=new at(z(l)),t=Fe(s),o=s._didMount();return N(()=>z(l).getScrollElement(),e=>{e&&s._willUpdate()},{immediate:!0}),N(()=>z(l),e=>{s.setOptions({...e,onChange:(a,i)=>{var n;pe(t),(n=e.onChange)==null||n.call(e,a,i)}}),s._willUpdate(),pe(t)},{immediate:!0}),Pe(o),t}function rt(l){return st(x(()=>({observeElementRect:tt,observeElementOffset:lt,scrollToFn:ot,...z(l)})))}function ut(l,s,t){let o=A(t==null?void 0:t.value),e=x(()=>l.value!==void 0);return[x(()=>e.value?l.value:o.value),function(a){return e.value||(o.value=a),s==null?void 0:s(a)}]}function dt(){let l=ce();return Oe(()=>l.dispose()),l}function ct(){let l=dt();return s=>{l.dispose(),l.nextFrame(s)}}function ge(l){return[l.screenX,l.screenY]}function vt(){let l=A([-1,-1]);return{wasMoved(s){let t=ge(s);return l.value[0]===t[0]&&l.value[1]===t[1]?!1:(l.value=t,!0)},update(s){l.value=ge(s)}}}function ft({container:l,accept:s,walk:t,enabled:o}){Q(()=>{let e=l.value;if(!e||o!==void 0&&!o.value)return;let a=Re(l);if(!a)return;let i=Object.assign(h=>s(h),{acceptNode:s}),n=a.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,i,!1);for(;n.nextNode();)t(n.currentNode)})}var Ee=(l=>(l[l.Left=0]="Left",l[l.Right=2]="Right",l))(Ee||{});function pt(l){throw new Error("Unexpected object: "+l)}var _=(l=>(l[l.First=0]="First",l[l.Previous=1]="Previous",l[l.Next=2]="Next",l[l.Last=3]="Last",l[l.Specific=4]="Specific",l[l.Nothing=5]="Nothing",l))(_||{});function xe(l,s){let t=s.resolveItems();if(t.length<=0)return null;let o=s.resolveActiveIndex(),e=o??-1;switch(l.focus){case 0:{for(let a=0;a<t.length;++a)if(!s.resolveDisabled(t[a],a,t))return a;return o}case 1:{e===-1&&(e=t.length);for(let a=e-1;a>=0;--a)if(!s.resolveDisabled(t[a],a,t))return a;return o}case 2:{for(let a=e+1;a<t.length;++a)if(!s.resolveDisabled(t[a],a,t))return a;return o}case 3:{for(let a=t.length-1;a>=0;--a)if(!s.resolveDisabled(t[a],a,t))return a;return o}case 4:{for(let a=0;a<t.length;++a)if(s.resolveId(t[a],a,t)===l.id)return a;return o}case 5:return null;default:pt(l)}}function Te(l={},s=null,t=[]){for(let[o,e]of Object.entries(l))ze(t,Me(s,o),e);return t}function Me(l,s){return l?l+"["+s+"]":s}function ze(l,s,t){if(Array.isArray(t))for(let[o,e]of t.entries())ze(l,Me(s,o.toString()),e);else t instanceof Date?l.push([s,t.toISOString()]):typeof t=="boolean"?l.push([s,t?"1":"0"]):typeof t=="string"?l.push([s,t]):typeof t=="number"?l.push([s,`${t}`]):t==null?l.push([s,""]):Te(t,s,l)}var ht={};function mt(l,s){return l===s}var bt=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(bt||{}),gt=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(gt||{}),xt=(l=>(l[l.Pointer=0]="Pointer",l[l.Focus=1]="Focus",l[l.Other=2]="Other",l))(xt||{});let Ae=Symbol("ComboboxContext");function G(l){let s=ye(Ae,null);if(s===null){let t=new Error(`<${l} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,G),t}return s}let _e=Symbol("VirtualContext"),St=Y({name:"VirtualProvider",setup(l,{slots:s}){let t=G("VirtualProvider"),o=x(()=>{let n=w(t.optionsRef);if(!n)return{start:0,end:0};let h=window.getComputedStyle(n);return{start:parseFloat(h.paddingBlockStart||h.paddingTop),end:parseFloat(h.paddingBlockEnd||h.paddingBottom)}}),e=rt(x(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return w(t.optionsRef)},overscan:12}))),a=x(()=>{var n;return(n=t.virtual.value)==null?void 0:n.options}),i=A(0);return N([a],()=>{i.value+=1}),we(_e,t.virtual.value?e:null),()=>[te("div",{style:{position:"relative",width:"100%",height:`${e.value.getTotalSize()}px`},ref:n=>{if(n){if(typeof process<"u"&&ht.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&e.value.scrollToIndex(t.activeOptionIndex.value)}}},e.value.getVirtualItems().map(n=>Ve(s.default({option:t.virtual.value.options[n.index],open:t.comboboxState.value===0})[0],{key:`${i.value}-${n.index}`,"data-index":n.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":n.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${n.start}px)`,overflowAnchor:"none"}})))]}}),Ot=Y({name:"Combobox",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(l,{slots:s,attrs:t,emit:o}){let e=A(1),a=A(null),i=A(null),n=A(null),h=A(null),v=A({static:!1,hold:!1}),d=A([]),f=A(null),m=A(2),I=A(!1);function O(r=c=>c){let c=f.value!==null?d.value[f.value]:null,b=r(d.value.slice()),S=b.length>0&&b[0].dataRef.order.value!==null?b.sort((M,$)=>M.dataRef.order.value-$.dataRef.order.value):Je(b,M=>w(M.dataRef.domRef)),T=c?S.indexOf(c):null;return T===-1&&(T=null),{options:S,activeOptionIndex:T}}let F=x(()=>l.multiple?1:0),k=x(()=>l.nullable),[D,g]=ut(x(()=>l.modelValue),r=>o("update:modelValue",r),x(()=>l.defaultValue)),E=x(()=>D.value===void 0?Z(F.value,{1:[],0:void 0}):D.value),V=null,p=null;function R(r){return Z(F.value,{0(){return g==null?void 0:g(r)},1:()=>{let c=L(u.value.value).slice(),b=L(r),S=c.findIndex(T=>u.compare(b,L(T)));return S===-1?c.push(b):c.splice(S,1),g==null?void 0:g(c)}})}let C=x(()=>{});N([C],([r],[c])=>{if(u.virtual.value&&r&&c&&f.value!==null){let b=r.indexOf(c[f.value]);b!==-1?f.value=b:f.value=null}});let u={comboboxState:e,value:E,mode:F,compare(r,c){if(typeof l.by=="string"){let b=l.by;return(r==null?void 0:r[b])===(c==null?void 0:c[b])}return l.by===null?mt(r,c):l.by(r,c)},calculateIndex(r){return u.virtual.value?l.by===null?u.virtual.value.options.indexOf(r):u.virtual.value.options.findIndex(c=>u.compare(c,r)):d.value.findIndex(c=>u.compare(c.dataRef.value,r))},defaultValue:x(()=>l.defaultValue),nullable:k,immediate:x(()=>!1),virtual:x(()=>null),inputRef:i,labelRef:a,buttonRef:n,optionsRef:h,disabled:x(()=>l.disabled),options:d,change(r){g(r)},activeOptionIndex:x(()=>{if(I.value&&f.value===null&&(u.virtual.value?u.virtual.value.options.length>0:d.value.length>0)){if(u.virtual.value){let c=u.virtual.value.options.findIndex(b=>{var S;return!((S=u.virtual.value)!=null&&S.disabled(b))});if(c!==-1)return c}let r=d.value.findIndex(c=>!c.dataRef.disabled);if(r!==-1)return r}return f.value}),activationTrigger:m,optionsPropsRef:v,closeCombobox(){I.value=!1,!l.disabled&&e.value!==1&&(e.value=1,f.value=null)},openCombobox(){if(I.value=!0,!l.disabled&&e.value!==0){if(u.value.value){let r=u.calculateIndex(u.value.value);r!==-1&&(f.value=r)}e.value=0}},setActivationTrigger(r){m.value=r},goToOption(r,c,b){I.value=!1,V!==null&&cancelAnimationFrame(V),V=requestAnimationFrame(()=>{if(l.disabled||h.value&&!v.value.static&&e.value===1)return;if(u.virtual.value){f.value=r===_.Specific?c:xe({focus:r},{resolveItems:()=>u.virtual.value.options,resolveActiveIndex:()=>{var M,$;return($=(M=u.activeOptionIndex.value)!=null?M:u.virtual.value.options.findIndex(K=>{var X;return!((X=u.virtual.value)!=null&&X.disabled(K))}))!=null?$:null},resolveDisabled:M=>u.virtual.value.disabled(M),resolveId(){throw new Error("Function not implemented.")}}),m.value=b??2;return}let S=O();if(S.activeOptionIndex===null){let M=S.options.findIndex($=>!$.dataRef.disabled);M!==-1&&(S.activeOptionIndex=M)}let T=r===_.Specific?c:xe({focus:r},{resolveItems:()=>S.options,resolveActiveIndex:()=>S.activeOptionIndex,resolveId:M=>M.id,resolveDisabled:M=>M.dataRef.disabled});f.value=T,m.value=b??2,d.value=S.options})},selectOption(r){let c=d.value.find(S=>S.id===r);if(!c)return;let{dataRef:b}=c;R(b.value)},selectActiveOption(){if(u.activeOptionIndex.value!==null){if(u.virtual.value)R(u.virtual.value.options[u.activeOptionIndex.value]);else{let{dataRef:r}=d.value[u.activeOptionIndex.value];R(r.value)}u.goToOption(_.Specific,u.activeOptionIndex.value)}},registerOption(r,c){let b=ke({id:r,dataRef:c});if(u.virtual.value){d.value.push(b);return}p&&cancelAnimationFrame(p);let S=O(T=>(T.push(b),T));f.value===null&&u.isSelected(c.value.value)&&(S.activeOptionIndex=S.options.indexOf(b)),d.value=S.options,f.value=S.activeOptionIndex,m.value=2,S.options.some(T=>!w(T.dataRef.domRef))&&(p=requestAnimationFrame(()=>{let T=O();d.value=T.options,f.value=T.activeOptionIndex}))},unregisterOption(r,c){if(V!==null&&cancelAnimationFrame(V),c&&(I.value=!0),u.virtual.value){d.value=d.value.filter(S=>S.id!==r);return}let b=O(S=>{let T=S.findIndex(M=>M.id===r);return T!==-1&&S.splice(T,1),S});d.value=b.options,f.value=b.activeOptionIndex,m.value=2},isSelected(r){return Z(F.value,{0:()=>u.compare(L(u.value.value),L(r)),1:()=>L(u.value.value).some(c=>u.compare(L(c),L(r)))})},isActive(r){return f.value===u.calculateIndex(r)}};Ke([i,n,h],()=>u.closeCombobox(),x(()=>e.value===0)),we(Ae,u),Ue(x(()=>Z(e.value,{0:ne.Open,1:ne.Closed})));let y=x(()=>{var r;return(r=w(i))==null?void 0:r.closest("form")});return ve(()=>{N([y],()=>{if(!y.value||l.defaultValue===void 0)return;function r(){u.change(l.defaultValue)}return y.value.addEventListener("reset",r),()=>{var c;(c=y.value)==null||c.removeEventListener("reset",r)}},{immediate:!0})}),()=>{var r,c,b;let{name:S,disabled:T,form:M,...$}=l,K={open:e.value===0,disabled:T,activeIndex:u.activeOptionIndex.value,activeOption:u.activeOptionIndex.value===null?null:u.virtual.value?u.virtual.value.options[(r=u.activeOptionIndex.value)!=null?r:0]:(b=(c=u.options.value[u.activeOptionIndex.value])==null?void 0:c.dataRef.value)!=null?b:null,value:E.value};return te(Ie,[...S!=null&&E.value!=null?Te({[S]:E.value}).map(([X,De])=>te(qe,He({features:Ze.Hidden,key:X,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:M,disabled:T,name:X,value:De}))):[],ee({theirProps:{...t,...fe($,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:K,slots:s,attrs:t,name:"Combobox"})])}}}),yt=Y({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(l,{attrs:s,slots:t,expose:o}){var e;let a=(e=l.id)!=null?e:`headlessui-combobox-button-${oe()}`,i=G("ComboboxButton");o({el:i.buttonRef,$el:i.buttonRef});function n(d){i.disabled.value||(i.comboboxState.value===0?i.closeCombobox():(d.preventDefault(),i.openCombobox()),j(()=>{var f;return(f=w(i.inputRef))==null?void 0:f.focus({preventScroll:!0})}))}function h(d){switch(d.key){case P.ArrowDown:d.preventDefault(),d.stopPropagation(),i.comboboxState.value===1&&i.openCombobox(),j(()=>{var f;return(f=i.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case P.ArrowUp:d.preventDefault(),d.stopPropagation(),i.comboboxState.value===1&&(i.openCombobox(),j(()=>{i.value.value||i.goToOption(_.Last)})),j(()=>{var f;return(f=i.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return;case P.Escape:if(i.comboboxState.value!==0)return;d.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&d.stopPropagation(),i.closeCombobox(),j(()=>{var f;return(f=i.inputRef.value)==null?void 0:f.focus({preventScroll:!0})});return}}let v=Ye(x(()=>({as:l.as,type:s.type})),i.buttonRef);return()=>{var d,f;let m={open:i.comboboxState.value===0,disabled:i.disabled.value,value:i.value.value},{...I}=l,O={ref:i.buttonRef,id:a,type:v.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(d=w(i.optionsRef))==null?void 0:d.id,"aria-expanded":i.comboboxState.value===0,"aria-labelledby":i.labelRef.value?[(f=w(i.labelRef))==null?void 0:f.id,a].join(" "):void 0,disabled:i.disabled.value===!0?!0:void 0,onKeydown:h,onClick:n};return ee({ourProps:O,theirProps:I,slot:m,attrs:s,slots:t,name:"ComboboxButton"})}}}),wt=Y({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:l=>!0},setup(l,{emit:s,attrs:t,slots:o,expose:e}){var a;let i=(a=l.id)!=null?a:`headlessui-combobox-input-${oe()}`,n=G("ComboboxInput"),h=x(()=>Re(w(n.inputRef))),v={value:!1};e({el:n.inputRef,$el:n.inputRef});function d(){n.change(null);let p=w(n.optionsRef);p&&(p.scrollTop=0),n.goToOption(_.Nothing)}let f=x(()=>{var p;let R=n.value.value;return w(n.inputRef)?typeof l.displayValue<"u"&&R!==void 0?(p=l.displayValue(R))!=null?p:"":typeof R=="string"?R:"":""});ve(()=>{N([f,n.comboboxState,h],([p,R],[C,u])=>{if(v.value)return;let y=w(n.inputRef);y&&((u===0&&R===1||p!==C)&&(y.value=p),requestAnimationFrame(()=>{var r;if(v.value||!y||((r=h.value)==null?void 0:r.activeElement)!==y)return;let{selectionStart:c,selectionEnd:b}=y;Math.abs((b??0)-(c??0))===0&&c===0&&y.setSelectionRange(y.value.length,y.value.length)}))},{immediate:!0}),N([n.comboboxState],([p],[R])=>{if(p===0&&R===1){if(v.value)return;let C=w(n.inputRef);if(!C)return;let u=C.value,{selectionStart:y,selectionEnd:r,selectionDirection:c}=C;C.value="",C.value=u,c!==null?C.setSelectionRange(y,r,c):C.setSelectionRange(y,r)}})});let m=A(!1);function I(){m.value=!0}function O(){ce().nextFrame(()=>{m.value=!1})}let F=ct();function k(p){switch(v.value=!0,F(()=>{v.value=!1}),p.key){case P.Enter:if(v.value=!1,n.comboboxState.value!==0||m.value)return;if(p.preventDefault(),p.stopPropagation(),n.activeOptionIndex.value===null){n.closeCombobox();return}n.selectActiveOption(),n.mode.value===0&&n.closeCombobox();break;case P.ArrowDown:return v.value=!1,p.preventDefault(),p.stopPropagation(),Z(n.comboboxState.value,{0:()=>n.goToOption(_.Next),1:()=>n.openCombobox()});case P.ArrowUp:return v.value=!1,p.preventDefault(),p.stopPropagation(),Z(n.comboboxState.value,{0:()=>n.goToOption(_.Previous),1:()=>{n.openCombobox(),j(()=>{n.value.value||n.goToOption(_.Last)})}});case P.Home:if(p.shiftKey)break;return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(_.First);case P.PageUp:return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(_.First);case P.End:if(p.shiftKey)break;return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(_.Last);case P.PageDown:return v.value=!1,p.preventDefault(),p.stopPropagation(),n.goToOption(_.Last);case P.Escape:if(v.value=!1,n.comboboxState.value!==0)return;p.preventDefault(),n.optionsRef.value&&!n.optionsPropsRef.value.static&&p.stopPropagation(),n.nullable.value&&n.mode.value===0&&n.value.value===null&&d(),n.closeCombobox();break;case P.Tab:if(v.value=!1,n.comboboxState.value!==0)return;n.mode.value===0&&n.activationTrigger.value!==1&&n.selectActiveOption(),n.closeCombobox();break}}function D(p){s("change",p),n.nullable.value&&n.mode.value===0&&p.target.value===""&&d(),n.openCombobox()}function g(p){var R,C,u;let y=(R=p.relatedTarget)!=null?R:he.find(r=>r!==p.currentTarget);if(v.value=!1,!((C=w(n.optionsRef))!=null&&C.contains(y))&&!((u=w(n.buttonRef))!=null&&u.contains(y))&&n.comboboxState.value===0)return p.preventDefault(),n.mode.value===0&&(n.nullable.value&&n.value.value===null?d():n.activationTrigger.value!==1&&n.selectActiveOption()),n.closeCombobox()}function E(p){var R,C,u;let y=(R=p.relatedTarget)!=null?R:he.find(r=>r!==p.currentTarget);(C=w(n.buttonRef))!=null&&C.contains(y)||(u=w(n.optionsRef))!=null&&u.contains(y)||n.disabled.value||n.immediate.value&&n.comboboxState.value!==0&&(n.openCombobox(),ce().nextFrame(()=>{n.setActivationTrigger(1)}))}let V=x(()=>{var p,R,C,u;return(u=(C=(R=l.defaultValue)!=null?R:n.defaultValue.value!==void 0?(p=l.displayValue)==null?void 0:p.call(l,n.defaultValue.value):null)!=null?C:n.defaultValue.value)!=null?u:""});return()=>{var p,R,C,u,y,r,c;let b={open:n.comboboxState.value===0},{displayValue:S,onChange:T,...M}=l,$={"aria-controls":(p=n.optionsRef.value)==null?void 0:p.id,"aria-expanded":n.comboboxState.value===0,"aria-activedescendant":n.activeOptionIndex.value===null?void 0:n.virtual.value?(R=n.options.value.find(K=>!n.virtual.value.disabled(K.dataRef.value)&&n.compare(K.dataRef.value,n.virtual.value.options[n.activeOptionIndex.value])))==null?void 0:R.id:(C=n.options.value[n.activeOptionIndex.value])==null?void 0:C.id,"aria-labelledby":(r=(u=w(n.labelRef))==null?void 0:u.id)!=null?r:(y=w(n.buttonRef))==null?void 0:y.id,"aria-autocomplete":"list",id:i,onCompositionstart:I,onCompositionend:O,onKeydown:k,onInput:D,onFocus:E,onBlur:g,role:"combobox",type:(c=t.type)!=null?c:"text",tabIndex:0,ref:n.inputRef,defaultValue:V.value,disabled:n.disabled.value===!0?!0:void 0};return ee({ourProps:$,theirProps:M,slot:b,attrs:t,slots:o,features:le.RenderStrategy|le.Static,name:"ComboboxInput"})}}}),It=Y({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(l,{attrs:s,slots:t,expose:o}){let e=G("ComboboxOptions"),a=`headlessui-combobox-options-${oe()}`;o({el:e.optionsRef,$el:e.optionsRef}),Q(()=>{e.optionsPropsRef.value.static=l.static}),Q(()=>{e.optionsPropsRef.value.hold=l.hold});let i=je(),n=x(()=>i!==null?(i.value&ne.Open)===ne.Open:e.comboboxState.value===0);ft({container:x(()=>w(e.optionsRef)),enabled:x(()=>e.comboboxState.value===0),accept(v){return v.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:v.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(v){v.setAttribute("role","none")}});function h(v){v.preventDefault()}return()=>{var v,d,f;let m={open:e.comboboxState.value===0},I={"aria-labelledby":(f=(v=w(e.labelRef))==null?void 0:v.id)!=null?f:(d=w(e.buttonRef))==null?void 0:d.id,id:a,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0,onMousedown:h},O=fe(l,["hold"]);return ee({ourProps:I,theirProps:O,slot:m,attrs:s,slots:e.virtual.value&&e.comboboxState.value===0?{...t,default:()=>[te(St,{},t.default)]}:t,features:le.RenderStrategy|le.Static,visible:n.value,name:"ComboboxOptions"})}}}),Se=Y({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(l,{slots:s,attrs:t,expose:o}){let e=G("ComboboxOption"),a=`headlessui-combobox-option-${oe()}`,i=A(null),n=x(()=>l.disabled);o({el:i,$el:i});let h=x(()=>{var g;return e.virtual.value?e.activeOptionIndex.value===e.calculateIndex(l.value):e.activeOptionIndex.value===null?!1:((g=e.options.value[e.activeOptionIndex.value])==null?void 0:g.id)===a}),v=x(()=>e.isSelected(l.value)),d=ye(_e,null),f=x(()=>({disabled:l.disabled,value:l.value,domRef:i,order:x(()=>l.order)}));ve(()=>e.registerOption(a,f)),Oe(()=>e.unregisterOption(a,h.value)),Q(()=>{let g=w(i);g&&(d==null||d.value.measureElement(g))}),Q(()=>{e.comboboxState.value===0&&h.value&&(e.virtual.value||e.activationTrigger.value!==0&&j(()=>{var g,E;return(E=(g=w(i))==null?void 0:g.scrollIntoView)==null?void 0:E.call(g,{block:"nearest"})}))});function m(g){g.preventDefault(),g.button===Ee.Left&&(n.value||(e.selectOption(a),We()||requestAnimationFrame(()=>{var E;return(E=w(e.inputRef))==null?void 0:E.focus({preventScroll:!0})}),e.mode.value===0&&e.closeCombobox()))}function I(){var g;if(l.disabled||(g=e.virtual.value)!=null&&g.disabled(l.value))return e.goToOption(_.Nothing);let E=e.calculateIndex(l.value);e.goToOption(_.Specific,E)}let O=vt();function F(g){O.update(g)}function k(g){var E;if(!O.wasMoved(g)||l.disabled||(E=e.virtual.value)!=null&&E.disabled(l.value)||h.value)return;let V=e.calculateIndex(l.value);e.goToOption(_.Specific,V,0)}function D(g){var E;O.wasMoved(g)&&(l.disabled||(E=e.virtual.value)!=null&&E.disabled(l.value)||h.value&&(e.optionsPropsRef.value.hold||e.goToOption(_.Nothing)))}return()=>{let{disabled:g}=l,E={active:h.value,selected:v.value,disabled:g},V={id:a,ref:i,role:"option",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,"aria-selected":v.value,disabled:void 0,onMousedown:m,onFocus:I,onPointerenter:F,onMouseenter:F,onPointermove:k,onMousemove:k,onPointerleave:D,onMouseleave:D},p=fe(l,["order","value"]);return ee({ourProps:V,theirProps:p,slot:E,attrs:t,slots:s,name:"ComboboxOption"})}}});function kt(l,s){return B(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[W("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function Rt(l,s){return B(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[W("path",{"fill-rule":"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z","clip-rule":"evenodd"})])}function Ct(l,s){return B(),J("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[W("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}const Et={class:"relative mt-1"},Tt={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},Mt={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700 rounded-none"},zt={__name:"SelectWithSearch",props:{content:Array,what:String},emits:["itemSelected"],setup(l,{emit:s}){const t=l;let o=A(null),e=A("");const a=x(()=>e.value===""?null:{id:null,name:e.value});let i=x(()=>e.value.length<=2?[]:t.content.filter(d=>d.name.toLowerCase().replace(/\s+/g,"").includes(e.value.toLowerCase().replace(/\s+/g,""))));const n=s;N(o,()=>{n("itemSelected",o.value)});let h=function(){document.getElementById("create").parentElement.classList.add("hover")},v=function(){document.getElementById("create").parentElement.classList.remove("hover")};return(d,f)=>(B(),ae(z(Ot),{modelValue:z(o),"onUpdate:modelValue":f[2]||(f[2]=m=>ie(o)?o.value=m:o=m),nullable:""},{default:U(()=>[W("div",Et,[W("div",Tt,[q(z(wt),{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:m=>m==null?void 0:m.name,onChange:f[0]||(f[0]=m=>ie(e)?e.value=m.target.value:e=m.target.value)},null,8,["displayValue"]),q(z(yt),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:U(()=>[q(z(Ct),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),q(z(Ne),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:f[1]||(f[1]=m=>ie(e)?e.value="":e="")},{default:U(()=>[q(z(It),{class:"absolute z-20 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:U(()=>[z(e)!==""?(B(),J("div",Mt,[a.value?(B(),ae(z(Se),{key:0,value:a.value,id:"create",onMouseover:z(h),onMouseleave:z(v)},{default:U(()=>[$e(" Kreiraj "+re(l.what)+': "'+re(z(e))+'" ',1)]),_:1},8,["value","onMouseover","onMouseleave"])):se("",!0)])):se("",!0),(B(!0),J(Ie,null,Be(z(i),m=>(B(),ae(z(Se),{as:"template",key:m.id,value:m},{default:U(({selected:I,active:O})=>[W("li",{class:ue(["relative cursor-default select-none py-2 px-4",{"bg-teal-600 text-white":O,"text-gray-900":!O}])},[W("span",{class:ue(["block truncate",{"font-medium":I,"font-normal":!I}])},re(m.name),3),I?(B(),J("span",{key:0,class:ue(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":O,"text-teal-600":!O}])},[q(z(Rt),{class:"h-5 w-5","aria-hidden":"true"})],2)):se("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1},8,["modelValue"]))}},Vt=Le(zt,[["__scopeId","data-v-c17858ad"]]);export{Vt as S,kt as r};
