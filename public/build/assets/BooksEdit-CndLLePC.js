import{C as $,l as f,q as D,c as h,o as y,a as n,u as o,m as F,w as A,b as e,f as H,i as a,j as b,F as w,k as C,t as k,p as K}from"./app-BeP4O2Qr.js";import{_ as E}from"./AuthenticatedLayout-BtwPcbCt.js";import{_ as m}from"./InputError-DX3Eb3Mu.js";import{_ as c}from"./FormInputLabel-D0cxdAy1.js";import{r as S,S as I}from"./SelectWithSearch-CvycXaJ0.js";import{C as N}from"./Content-ZLvvmJ8Y.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./transition-DLwEq63v.js";import"./keyboard-DiBWpZQ_.js";import"./use-resolve-button-type-BPUfjXP6.js";const T={class:"pt-4 pb-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},J={class:"grid gap-6 mb-6 md:grid-cols-2"},P={class:"mb-3"},Q={class:"mb-3"},R={class:"mb-3"},X={class:"mb-3 grid gap-2 md:grid-cols-2"},Y={class:"mb-3 grid gap-2 md:grid-cols-2"},Z={ref:"dynamicColumn"},ee={class:"w-full text-sm text-left text-gray-500 mb-4"},te={scope:"row",class:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap hover:bg-gray-200"},se={class:"flex"},oe={class:"inline"},le={class:"ml-auto"},re={class:"grid gap-6 mb-6 grid-cols-3"},ne={class:"col-span-2"},ie={class:"text-sm text-red-600 mt-2"},ae={class:"w-full text-sm text-left text-gray-500 mb-4"},ue={scope:"row",class:"py-4 px-6 font-medium text-gray-900 whitespace-nowraphover:bg-gray-200"},de={class:"flex"},be={class:"inline"},me={class:"ml-auto"},ce={class:"grid gap-6 mb-6 grid-cols-3"},ge={class:"col-span-2"},pe=Object.assign({layout:E},{__name:"BooksEdit",props:{book:Object,authors:Array,keywords:Array},setup(x){let i=x,t=$({title:i.book.title,year_published:i.book.year_published,inventory_number:i.book.inventory_number,signature:i.book.signature,number_of_units:i.book.number_of_units,publisher:i.book.publisher,location_published:i.book.location_published,authors:i.book.authors,newAuthors:[],keywords:i.book.keywords,newKeywords:[]});const V=()=>{t.patch(route("books.update",i.book.id))};let g=f(i.book.authors.map(r=>r.name)),u=f(i.authors),p=f(i.book.keywords.map(r=>r.title)),d=f(i.keywords);const U=r=>{u.value=r},z=r=>{d.value=r};function B(){if(g.value.includes(u.value.name)){alert("Autor "+u.value.name+" je već dodan!");return}g.value.push(u.value.name),u.value.id!=null?t.authors.push(u.value):t.newAuthors.push(u.value.name),v(50)}function O(){if(p.value.includes(d.value.name)){alert("Ključna riječ "+d.value.name+" je već dodana!");return}p.value.push(d.value.name),d.value.id!=null?t.keywords.push(d.value):t.newKeywords.push(d.value.name),v(50)}function q(r){let s=g.value.indexOf(r);g.value.splice(s,1),s=t.authors.findIndex(function(l){return l.name===r}),s>-1?t.authors.splice(s,1):(s=t.newAuthors.indexOf(r),t.newAuthors.splice(s,1)),v(-50)}function L(r){let s=p.value.indexOf(r);if(p.value.splice(s,1),s=t.keywords.findIndex(function(l){return l.name===r}),s>-1){t.keywords.splice(s,1);return}s=t.keywords.findIndex(function(l){return l.title===r}),s>-1?t.keywords.splice(s,1):(s=t.newKeywords.indexOf(r),t.newKeywords.splice(s,1)),v(-50)}const _=f(null);let j=null;D(()=>{j=_.value.offsetHeight});function v(r){let s=_.value.offsetHeight;r<0&&s-50<=j||(_.value.style.height=s+r+"px")}return(r,s)=>(y(),h(w,null,[n(o(F),{title:"Izmjena knjige"}),n(N,null,{header:A(()=>s[7]||(s[7]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Izmjena knjige",-1)])),default:A(()=>[e("div",T,[e("div",W,[e("div",{class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-4",ref_key:"main",ref:_},[e("form",{onSubmit:H(V,["prevent"])},[e("div",J,[e("div",null,[e("div",P,[n(c,{what:"signature",msg:"Signatura"}),a(e("input",{type:"text",name:"signature",id:"signature","onUpdate:modelValue":s[0]||(s[0]=l=>o(t).signature=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[b,o(t).signature]]),n(m,{class:"mt-2",message:o(t).errors.signature},null,8,["message"])]),e("div",Q,[n(c,{what:"title",msg:"Naziv djela"}),a(e("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":s[1]||(s[1]=l=>o(t).title=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:""},null,512),[[b,o(t).title]]),n(m,{class:"mt-2",message:o(t).errors.title},null,8,["message"])]),e("div",R,[n(c,{what:"publisher",msg:"Izdavač"}),a(e("input",{type:"text",name:"publisher",id:"publisher","onUpdate:modelValue":s[2]||(s[2]=l=>o(t).publisher=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[b,o(t).publisher]]),n(m,{class:"mt-2",message:o(t).errors.publisher,disabled:o(t).processing},null,8,["message","disabled"])]),e("div",X,[e("div",null,[n(c,{what:"location_published",msg:"Mjesto izdavanja"}),a(e("input",{type:"text",name:"location_published",id:"location_published","onUpdate:modelValue":s[3]||(s[3]=l=>o(t).location_published=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[b,o(t).location_published]]),n(m,{class:"mt-2",message:o(t).errors.location_published,disabled:o(t).processing},null,8,["message","disabled"])]),e("div",null,[n(c,{what:"year_published",msg:"Godina izdavanja"}),a(e("input",{type:"number",name:"year_published",id:"year_published","onUpdate:modelValue":s[4]||(s[4]=l=>o(t).year_published=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:""},null,512),[[b,o(t).year_published]]),n(m,{class:"mt-2",message:o(t).errors.year_published,disabled:o(t).processing},null,8,["message","disabled"])])]),e("div",Y,[e("div",null,[n(c,{what:"inventory_number",msg:"Inventarni broj"}),a(e("input",{type:"text",name:"inventory_number",id:"inventory_number","onUpdate:modelValue":s[5]||(s[5]=l=>o(t).inventory_number=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",required:""},null,512),[[b,o(t).inventory_number]]),n(m,{class:"mt-2",message:o(t).errors.inventory_number,disabled:o(t).processing},null,8,["message","disabled"])]),e("div",null,[n(c,{what:"number_of_units",msg:"Broj jedinica"}),a(e("input",{type:"number",name:"number_of_units",id:"number_of_units","onUpdate:modelValue":s[6]||(s[6]=l=>o(t).number_of_units=l),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"",required:""},null,512),[[b,o(t).number_of_units]]),n(m,{class:"mt-2",message:o(t).errors.number_of_units,disabled:o(t).processing},null,8,["message","disabled"])])])]),e("div",Z,[e("table",ee,[s[8]||(s[8]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"}," Autori djela ",-1)),e("tbody",null,[(y(!0),h(w,null,C(o(g),l=>(y(),h("tr",{key:l,class:"bg-white border-b"},[e("th",te,[e("div",se,[e("span",null,[e("p",oe,k(l),1)]),e("span",le,[n(o(S),{onClick:M=>q(l),class:"h-4 w-4 inline rm-bg"},null,8,["onClick"])])])])]))),128))])]),e("div",re,[e("div",ne,[n(I,{what:"autora",content:x.authors,onItemSelected:U},null,8,["content"]),a(e("div",null,[e("p",ie,k(o(t).errors.authors),1)],512),[[K,o(t).errors.authors||o(t).errors.newAuthors]])]),e("div",{class:"pt-2"},[e("button",{onClick:B,type:"button",class:"py-2 px-3 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 w-full"},"Dodaj autora")])]),e("table",ae,[s[9]||(s[9]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"}," Ključne riječi ",-1)),e("tbody",null,[(y(!0),h(w,null,C(o(p),l=>(y(),h("tr",{key:l,class:"bg-white border-b"},[e("th",ue,[e("div",de,[e("span",null,[e("p",be,k(l),1)]),e("span",me,[n(o(S),{onClick:M=>L(l),class:"h-4 w-4 inline rm-bg"},null,8,["onClick"])])])])]))),128))])]),e("div",ce,[e("div",ge,[n(I,{what:"ključnu riječ",content:x.keywords,onItemSelected:z},null,8,["content"]),a(e("div",null,s[10]||(s[10]=[e("p",{class:"text-sm text-red-600 mt-2"}," Morate unijeti minimalno jednu ključnu riječ! ",-1)]),512),[[K,o(t).errors.keywords||o(t).errors.newKeywords]])]),e("div",{class:"pt-2"},[e("button",{onClick:O,type:"button",class:"py-2 px-3 text-xs font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 w-full"},"Dodaj ključnu riječ")])])],512)]),s[11]||(s[11]=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"},"Uredi knjigu",-1))],32)],512)])])]),_:1})],64))}}),Ce=G(pe,[["__scopeId","data-v-9cd13dc0"]]);export{Ce as default};
